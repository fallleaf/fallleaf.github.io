<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>IPv6 on Reading, Thinking and Writing</title>
        <link>https://blog.fallleaf.net/tags/ipv6/</link>
        <description>Recent content in IPv6 on Reading, Thinking and Writing</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>红旗下的蛋</copyright>
        <lastBuildDate>Tue, 08 Aug 2023 21:00:42 +0800</lastBuildDate><atom:link href="https://blog.fallleaf.net/tags/ipv6/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>5G回传承载网IPv6地址分配方案学习</title>
        <link>https://blog.fallleaf.net/p/tech-5g-backhaul-ipv6-addressing/</link>
        <pubDate>Tue, 08 Aug 2023 21:00:42 +0800</pubDate>
        
        <guid>https://blog.fallleaf.net/p/tech-5g-backhaul-ipv6-addressing/</guid>
        <description>&lt;h3 id=&#34;ipv6地址简介&#34;&gt;IPv6地址简介
&lt;/h3&gt;&lt;p&gt;IPv6地址采用共128二进制地址长度，分成8段，每16位1段，每段用4位16进制表示，分段间用“：”隔开。可采用压缩格式表示，即每段前导0可以删除，连续的“0”分段可以用“::”表示（只能出现一次）。&lt;/p&gt;
&lt;p&gt;下面是二进制形式的IPv6地址：&lt;/p&gt;
&lt;p&gt;0010000000000001 0000110110111000 0000000000000000 0010111100111011 0000001010101010 0000000011111111 1111111000101000 1001110001011010&lt;/p&gt;
&lt;p&gt;转换成十六进制表示：&lt;/p&gt;
&lt;p&gt;2001: 0DB8: 0000: 2F3B: 02AA: 00FF: FE28: 9C5A&lt;/p&gt;
&lt;p&gt;压缩格式为：&lt;/p&gt;
&lt;p&gt;2001:DB8:0:2F3B:2AA:FF:FE28:9C5A&lt;/p&gt;
&lt;p&gt;128位的IPv6地址由64位的子网前缀和64位的接口标识符组成。IPv6 前缀用“ 地址/ 前缀长度” 这一表示方法。所有子网都有64位子网络，例如2001:DB8:0:2F3B::/64表示一个子网前缀。任何少于 64 位的前缀要么表示一条 汇 总的路由，要么是一段 IPv6 地址空间的地址范围汇总，例如2001:DB8:3F::/48。&lt;/p&gt;
&lt;p&gt;对除由国际地址分配机构(ICANN、APNIC等)分配的前缀外，剩余地址比特位(前缀至第65比特前)可以由规划机构、互联网运营商自行划定，并制定相关含义。同时，64位接口标识符目前也没有形成全球明确的分配规则，可以在规划时统一考虑利用接口标识符承载多种信息。&lt;/p&gt;
&lt;h3 id=&#34;5g回传承载网ipv6地址分配方案学习&#34;&gt;5G回传承载网IPv6地址分配方案学习
&lt;/h3&gt;&lt;h3 id=&#34;ipv6地址规划方案&#34;&gt;IPv6地址规划方案
&lt;/h3&gt;&lt;p&gt;某运营商分配给5G回传承载网的IPv6地址段为2345:6720::/27（&lt;strong&gt;虚拟，非真实地址&lt;/strong&gt;）。&lt;/p&gt;
&lt;p&gt;5G回传承载网IP地址规划体现了层次划分原则，按网络类型、区域、层级、用途进行了划分。如下所示。&lt;/p&gt;
&lt;p&gt;1-27位：2345:6720::/27   5G回传承载网地址段&lt;/p&gt;
&lt;p&gt;28-35位：区域区分（骨干网、省分）&lt;/p&gt;
&lt;p&gt;36-40位：省内地市划分&lt;/p&gt;
&lt;p&gt;41-52位：地市内网络区分&lt;/p&gt;
&lt;p&gt;53-64位：子网用途划分&lt;/p&gt;
&lt;p&gt;由于5G回传承载网的IPv6地址为人工指定，所以仍可按子网划分方式设置特定的地址段。&lt;/p&gt;
&lt;p&gt;65-68位：网络层次（核心汇聚、接入）&lt;/p&gt;
&lt;h3 id=&#34;ipv6地址规划实例&#34;&gt;IPv6地址规划实例
&lt;/h3&gt;&lt;p&gt;承载网IPv6地址段为2345:6720::/27，把第二段换成二进制为：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2345:0110 0111 001&lt;/strong&gt;0 0000::/27，第二段第三个字节最后一位取值可为0和1，因此IPv6地址范围为：&lt;/p&gt;
&lt;p&gt;2345:6720::~2345:673F:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF&lt;/p&gt;
&lt;h4 id=&#34;区域规划&#34;&gt;区域规划
&lt;/h4&gt;&lt;p&gt;第28-35位共8位，作为区域划分，区分骨干和省分网络，一共可划分2^8=256个子网。&lt;/p&gt;
&lt;p&gt;把2345:6720:0000::/35转换成二进制为：&lt;/p&gt;
&lt;p&gt;2345:0110 0111 001&lt;strong&gt;0 0000:000&lt;/strong&gt;0 0000 0000 0000::/35，黑色粗体部分位区域子网，这样，第二段的第三个字节可取2，3，第四个字节可取0-F，第三段第一个字节可取0，2，4，6，8，A，C，E&lt;/p&gt;
&lt;p&gt;因此，这一层级的网络子网地址范围可分为：&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;20: 0&lt;/strong&gt;000::/35（骨干网络）&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;20: 2&lt;/strong&gt;000::/35   北京&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;20: 4&lt;/strong&gt;000::/35   上海&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;20: 6&lt;/strong&gt;000::/35   天津&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;20: 8&lt;/strong&gt;000::/35   山东&lt;/p&gt;
&lt;p&gt;….&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;23:A&lt;/strong&gt;000::/35 青海&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;23:C&lt;/strong&gt;000::/35 宁夏&lt;/p&gt;
&lt;p&gt;….&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;2F:E&lt;/strong&gt;000::/35 预留&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;30:0&lt;/strong&gt;000::/35 预留&lt;/p&gt;
&lt;p&gt;….&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;3F:C&lt;/strong&gt;000::/35 预留&lt;/p&gt;
&lt;p&gt;2345:67&lt;strong&gt;3F:E&lt;/strong&gt;000::/35 预留&lt;/p&gt;
&lt;p&gt;其中，对于骨干网络子网地址范围2345:67&lt;strong&gt;20: 0&lt;/strong&gt;000::/35，取第36位作为区分两个骨干承载网络，有&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;2345:6720: 0000::/36  2408:1000 0001 0010 0000:000&lt;strong&gt;0&lt;/strong&gt; 0000 0000 0000::/36  承载网一平面&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2345:6720: 1000::/36  2408:1000 0001 0010 0000:000&lt;strong&gt;1&lt;/strong&gt; 0000 0000 0000::/36  承载网二平面&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;省内地市规划&#34;&gt;省内地市规划
&lt;/h4&gt;&lt;p&gt;在各省的子网中，36-40为地市标识，最多有2^5=32个子网，以山东分配的地址段（2345:67&lt;strong&gt;20: 8&lt;/strong&gt;000::/35）为例进行划分。&lt;/p&gt;
&lt;p&gt;转换为二进制为：&lt;/p&gt;
&lt;p&gt;2345:6720: 100&lt;strong&gt;0 0000&lt;/strong&gt; 0000 0000 0000::/40，黑色字体为36-40位。&lt;/p&gt;
&lt;p&gt;第三段第一字节可取8和9，第二字节可取 0-F，因此有，按身份证号第三、四位对应城市顺序依次从1开始顺序编号，对应转换为5位2进制。如下：&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;80&lt;/strong&gt;00::/40  预留&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;81&lt;/strong&gt;00::/40  济南（济南01，5位二进制为0 0001）&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;82&lt;/strong&gt;00::/40  青岛（青岛02，5位二进制为0 0002）&lt;/p&gt;
&lt;p&gt;…&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;8D&lt;/strong&gt;00::/40 临沂&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;8E&lt;/strong&gt;00::/40 德州&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;8F&lt;/strong&gt;00::/40 聊城&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;90&lt;/strong&gt;00::/40 菏泽（菏泽17，5位二进制为1 1111）&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;91&lt;/strong&gt;00::/40 预留&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;92&lt;/strong&gt;00::/40 预留&lt;/p&gt;
&lt;p&gt;…&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;9D&lt;/strong&gt;00::/40 预留&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;9E&lt;/strong&gt;00::/40 预留&lt;/p&gt;
&lt;p&gt;2345:6720:&lt;strong&gt;9F&lt;/strong&gt;00::/40 预留&lt;/p&gt;
&lt;h4 id=&#34;地市内网络规划&#34;&gt;地市内网络规划
&lt;/h4&gt;&lt;p&gt;41-52位为地市内网络划分，可划分2^12=4096子网。以青岛（2345:6720:8200::/40）为例子，第三、四段转换为二进制为：&lt;/p&gt;
&lt;p&gt;2345:6720:1000 0010 &lt;strong&gt;0000 0000: 0000&lt;/strong&gt; 0000 0000 0000::/52&lt;/p&gt;
&lt;p&gt;加黑的字节可取0-F，因此有：&lt;/p&gt;
&lt;p&gt;2345:6720:82&lt;strong&gt;00:0&lt;/strong&gt;000::/52、&lt;/p&gt;
&lt;p&gt;2345:6720:82&lt;strong&gt;00:1&lt;/strong&gt;000::/52、&lt;/p&gt;
&lt;p&gt;…&lt;/p&gt;
&lt;p&gt;2345:6720:82&lt;strong&gt;00:F&lt;/strong&gt;000::/52&lt;/p&gt;
&lt;p&gt;2345:6720:82&lt;strong&gt;01:0&lt;/strong&gt;000::/52&lt;/p&gt;
&lt;p&gt;&amp;hellip;&lt;/p&gt;
&lt;p&gt;2345:6720:82&lt;strong&gt;FF:F&lt;/strong&gt;000::/52&lt;/p&gt;
&lt;p&gt;一共2^12=4096个，取第一子网地址段（2345:6720:82&lt;strong&gt;00:0&lt;/strong&gt;000::/52）作为山东省青岛市5G回传承载网的地址段，&lt;/p&gt;
&lt;h4 id=&#34;地市5g回传承载网子网用途划分&#34;&gt;地市5G回传承载网子网用途划分
&lt;/h4&gt;&lt;p&gt;53-64位按用途（网管、业务、端口互联）划分子网，&lt;/p&gt;
&lt;p&gt;2345:6720: 1000 0010 0000 0000: 0000 &lt;strong&gt;0000 0000 0000&lt;/strong&gt;::/64&lt;/p&gt;
&lt;p&gt;黑体的这三个字节分别可取0-F，因此有：&lt;/p&gt;
&lt;p&gt;2345:6720:8200:0&lt;strong&gt;000&lt;/strong&gt;::/64 青岛市5G回传承载网设备网管loopback地址段&lt;/p&gt;
&lt;p&gt;2345:6720:8200:0&lt;strong&gt;001&lt;/strong&gt;::/64 青岛市5G回传承载网设备网络业务loopback地址段&lt;/p&gt;
&lt;p&gt;2345:6720:8200:0&lt;strong&gt;002&lt;/strong&gt;::/64 青岛市5G回传承载网设备接口互联地址段&lt;/p&gt;
&lt;p&gt;…&lt;/p&gt;
&lt;p&gt;2345:6720:8200:0&lt;strong&gt;FFE&lt;/strong&gt;::/64 预留&lt;/p&gt;
&lt;p&gt;2345:6720:8200:0&lt;strong&gt;FFF&lt;/strong&gt;::/64 预留&lt;/p&gt;
&lt;h4 id=&#34;网络层次规划&#34;&gt;网络层次规划
&lt;/h4&gt;&lt;p&gt;将65-68位作为网络层次区分，共有2^4=16个，定义0000为核心汇聚层，0001为接入层，以青岛市5G回传承载网设备网络业务loopback地址段2345:6720:8200:0&lt;strong&gt;001&lt;/strong&gt;::/64 地址段为例：&lt;/p&gt;
&lt;p&gt;2345:6720:8200:0002:&lt;strong&gt;0000&lt;/strong&gt; 0000 0000 0000::/68 核心汇聚层业务loopback地址段，&lt;/p&gt;
&lt;p&gt;2345:6720:8200:0002:&lt;strong&gt;1111&lt;/strong&gt; 0000 0000 0000::/68 接入层业务loopback地址段，&lt;/p&gt;
&lt;h4 id=&#34;网管loopback地址网络业务地址及端口互联地址规划&#34;&gt;网管loopback地址，网络业务地址及端口互联地址规划
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;网管loopback地址，以/128前缀长度分配地址，&lt;/li&gt;
&lt;li&gt;业务loopback地址，以/128前缀长度分配地址，&lt;/li&gt;
&lt;li&gt;网络侧设备端口互联地址，以/127前缀长度分配地址，互联接口两端网络业务loopback地址小的取值/127中的0，网络业务loopback地址大的取值/127中的1，&lt;/li&gt;
&lt;li&gt;业务接入设备端口互联地址，按业务接入设备的IPv6地址规划，以/127前缀长度分配地址，互联接口两端网络业务loopback地址小的取值/127中的0，网络业务loopback地址大的取值/127中的1。&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        
    </channel>
</rss>
